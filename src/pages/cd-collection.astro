---
import Layout from "@/layouts/Layout.astro";
// import { Image } from "astro:assets";

import { getDiscogsCollection } from "@/lib/getDiscogsCollection";

const collection = await getDiscogsCollection(
  "nrRoute", 1
);
const albums = collection.map((item) => ({
  title: item.basic_information.title,
  artist: item.basic_information.artists[0].name,
  year: item.basic_information.year,
  link: item.basic_information.resource_url,
  // cover: item.basic_information.cover_image,
  // thumbnail: item.basic_information.thumb,
}));
---

<Layout title="持っているCDなど" description="持っているCDなど">
  <div class="card w-auto">
    <div class="relative flex items-center text-center justify-center">
      <h1 class="mb-3 text-2xl">
        持っているCDなど
      </h1>
    </div>
  </div>
  <div class="border-b-2 border-current">
    <ul>
      {albums.map((album) => (
        <li>
          <div>
            <a href={album.link} target="_blank" rel="noopener noreferrer">
              <div class="text-lg font-bold">
                {album.artist} - {album.title} ({album.year})
              </div>
            </a>
          </div>
        </li>
      ))}
    </ul>
  </div>
  <div class="my-5 ml-auto px-3">
    <a href="/">トップページに戻る</a>
  </div>
</Layout>

<style>
  .mb-3 {
    margin-bottom: 0.75rem;
  }

  .text-2xl {
    line-height: 2.5rem;
  }

  .grid {
    display: grid;
  }

  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .gap-4 {
    gap: 1rem;
  }

  .border-b-2 {
    border-bottom-width: 2px;
  }

  .border-current {
    border-color: currentColor;
  }

  .my-5 {
    margin-top: 1.25rem;
    margin-bottom: 1.25rem;
  }

  .ml-auto {
    margin-left: auto;
  }

  .px-3 {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
</style>